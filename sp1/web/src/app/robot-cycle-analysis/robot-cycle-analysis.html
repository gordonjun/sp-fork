<div ng-controller="RobotCycleAnalysisController as vm" class="robot-cycle-analysis">
    <div class="panel-toolbar">

        <div class="btn-group">
            <button class="btn btn-sm btn-default btn-notext" uib-tooltip="Setup bus"
                    ng-click="vm.setupBus()"><i class="fa fa-cog"></i>
            </button>
            <button class="btn btn-sm btn-default btn-notext" uib-tooltip="Connect to bus"
                    ng-click="vm.service.connectToBus()" ng-disabled="vm.service.busConnected">
                <i class="fa fa-arrow-up"></i>
            </button>
            <button class="btn btn-sm btn-default btn-notext" uib-tooltip="Disconnect from bus"
                    ng-click="vm.service.disconnectFromBus()" ng-disabled="!vm.service.busConnected">
                <i class="fa fa-arrow-down"></i>
            </button>
        </div>

        <div class="btn-group">
            <button class="btn btn-sm btn-default" uib-tooltip="Chosen work cell"
                    ng-click="vm.selectWorkCell()" ng-disabled="!vm.service.busConnected">
                <i class="fa fa-industry"></i>
                <span ng-show="vm.widget.storage.chosenWorkCell === null">None</span>
                <span ng-show="vm.widget.storage.chosenWorkCell !== null">
                    {{vm.widget.storage.chosenWorkCell.id}}: {{vm.widget.storage.chosenWorkCell.description}}
                </span>
            </button>
        </div>

        <div class="btn-group">
            <button type="button" class="btn btn-sm btn-default btn-notext" id="search-cycles-button"
                    uib-tooltip="Search cycles" ng-click="vm.searchCycles()"
                    ng-disabled="!vm.service.busConnected || vm.widget.storage.chosenWorkCell === null">
                <i class="fa fa-search"></i>
            </button>
        </div>

        <div class="btn-group">
            <button type="button" class="btn btn-sm btn-default btn-notext" id="toggle-live-chart-button"
                    uib-tooltip="Toggle live chart" ng-click="vm.toggleLiveChart()"
                    ng-disabled="!vm.service.busConnected || vm.widget.storage.chosenWorkCell === null">
                <i class="fa fa-play"></i>
            </button>
            <button type="button" class="btn btn-sm btn-default btn-notext" id="set-live-chart-width-button"
                    uib-tooltip="Set live chart width" ng-click="vm.setLiveChartWidth()"
                    ng-disabled="!vm.widget.storage.showLiveChart">
                <i class="fa fa-arrows-h"></i>
            </button>
        </div>
    </div>

    <div class="panel-content">
        <p class="no-cycles-text" colspan="3"
           ng-show="vm.widget.storage.ganttData.length === 0 && vm.widget.storage.liveCharts.length === 0">
            There are no cycles to show.
        </p>
        <div gantt data="vm.liveChartData" headers="['minute']" ng-show="vm.widget.storage.showLiveChart"
             headers-formats="{ minute: 'HH:mm', second: 'ss' }" from-date="vm.liveFromDate" to-date="vm.liveToDate"
             view-scale="'minute'" class="live-chart" current-date="'line'" current-date-value="vm.currentTime">
            <gantt-groups display="'promote'"></gantt-groups>
            <gantt-tooltips content="vm.liveChartTooltipContent" delay="200"></gantt-tooltips>
            <gantt-tree header="'Live Chart'"></gantt-tree>
        </div>
        <div gantt data="vm.widget.storage.ganttData" from-date="vm.historicalFromDate"
             headers="['minute']" headers-formats="{ minute: 'm', second: 'ss' }" view-scale="'minute'"
             ng-show="vm.widget.storage.ganttData.length > 0">
            <gantt-groups display="'promote'"></gantt-groups>
            <gantt-tooltips content="vm.taskTooltipContent" delay="200"></gantt-tooltips>
            <gantt-tree content="vm.treeContent" header="'Historical Cycles'"></gantt-tree>
        </div>
    </div>
</div>
