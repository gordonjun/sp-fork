package spgui.menu

import japgolly.scalajs.react._
import japgolly.scalajs.react.vdom.prefix_<^._
import org.scalajs.dom._

import spgui.components.CloseAllButton
import spgui.circuit._
import diode.react.ModelProxy
import spgui.components.Dropdown
import spgui.components.Icon

object SPMenu {

  case class Props(proxy: ModelProxy[Settings])

  private val component = ReactComponentB[Props]("SPMenu")
    .render_P(p =>
    p.proxy().compact match {
      case true => <.div()
      case false => <.div(
        <.nav(
          ReactAttr.Generic("data-toggle") := "collapse",
          ReactAttr.Generic("data-target") := "#navbar-collapse-id",
          ^.className := "navbar navbar-default",
          ^.className := SPMenuCSS.topNav.htmlClass,          
          <.div(
            <.div(
              ^.className := "navbar-header",
              ^.className := SPMenuCSS.navbarHeader.htmlClass,
              <.div(
                ^.className := SPMenuCSS.spLogoDiv.htmlClass,
                spLogo
              ),
              ^.className := "container-fluid",
              ^.className := SPMenuCSS.container.htmlClass,
              <.button(
                ^.className := SPMenuCSS.collapseButton.htmlClass,
                ^.className := "navbar-toggle collapsed",
                Icon.bars
              ),
              <.ul(
                ^.id := "navbar-collapse-id",
                ^.className := "collapse navbar-collapse",
                ^.className := SPMenuCSS.buttonList.htmlClass,
                ^.className := "nav navbar-nav",
                WidgetMenu(),
                CloseAllButton()
              )
            )
          )
        ))
      }
    )
    .build
  
  // <div class="navbar-header">
  //   <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
  //     <span class="sr-only">Toggle navigation</span>
  //     <span class="icon-bar"></span>
  //     <span class="icon-bar"></span>
  //     <span class="icon-bar"></span>
  //   </button>
  //   <a class="navbar-brand" href="#">Brand</a>
  // </div>

  private val spLogo = (
    <.div(
      ^.className := SPMenuCSS.splogoContainer.htmlClass,
      <.div(
        ^.className := SPMenuCSS.spLogo.htmlClass
      )
    ))
  def apply(proxy: ModelProxy[Settings]) = component(Props(proxy))
}
